<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SERVER HVH BEDWAR NESPOLA</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <!-- Link Font Awesome để dùng icon Discord và User vector -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        /* Keyframes cho hiệu ứng fade-in-up ban đầu của hero section */
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(20px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .initial-fade-in-up {
          animation: fadeIn 0.6s ease-out forwards;
        }
        .delay-200 { animation-delay: 0.2s; }
        .delay-400 { animation-delay: 0.4s; }

        /* Keyframes và classes cho hiệu ứng cuộn đa dạng hơn */
        .animated-section {
            opacity: 0;
            transition: opacity 0.8s cubic-bezier(0.2, 0.8, 0.2, 1), transform 0.8s cubic-bezier(0.2, 0.8, 0.2, 1);
        }
        .animated-section.is-visible {
            opacity: 1;
            transform: translateY(0) translateX(0) scale(1);
        }

        .slide-in-up-on-scroll {
            transform: translateY(30px);
        }
        .slide-in-left-on-scroll {
            transform: translateX(-50px);
        }
        .slide-in-right-on-scroll {
            transform: translateX(50px);
        }
        .scale-in-on-scroll {
            transform: scale(0.95);
        }

        /* Keyframes cho hiệu ứng gradient di chuyển của chữ NESPOLA */
        @keyframes gradient-breath {
            0% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
            100% {
                background-position: 0% 50%;
            }
        }
        .animate-gradient-text {
            /* Điều chỉnh màu sắc gradient để tạo sự nổi bật hơn */
            background: linear-gradient(90deg, #10B981, #6EE7B7, #10B981); /* Darker Green, Lighter Green, Darker Green */
            background-size: 200% 200%;
            -webkit-background-clip: text;
            background-clip: text; /* Thêm dòng này cho tương thích tốt hơn */
            -webkit-text-fill-color: transparent;
            animation: gradient-breath 4s ease infinite; /* Thời gian animation dài hơn, mượt mà */
        }

        .modal {
            background-color: rgba(0, 0, 0, 0.7);
        }
        .card-effect {
            border: 1px solid transparent;
            transition: border-color 0.3s ease-in-out, box-shadow 0.3s ease-in-out, transform 0.3s ease-in-out;
        }
        .card-effect:hover {
            border-color: #34D399;
            box-shadow: 0 10px 15px -3px rgba(52, 211, 153, 0.3), 0 4px 6px -2px rgba(52, 211, 153, 0.15);
            transform: translateY(-5px);
        }
        /* Custom selection highlight color */
        ::selection {
          background-color: #34D399; /* Green-500 */
          color: #ffffff; /* White text on selection */
        }
        ::-moz-selection { /* For Firefox */
          background-color: #34D399;
          color: #ffffff;
        }

        .modal-overlay {
            visibility: hidden;
            opacity: 0;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .modal-overlay.open {
            visibility: visible;
            opacity: 1;
        }
        .modal-content {
            transform: translateY(20px);
            opacity: 0;
            transition: transform 0.3s ease, opacity 0.3s ease;
        }
        .modal-overlay.open .modal-content {
            transform: translateY(0);
            opacity: 1;
        }
        /* Style for logged-in user display */
        .user-display {
            display: flex;
            align-items: center;
            gap: 0.5rem; /* Tailwind 'gap-2' */
            font-weight: 600; /* Tailwind 'font-semibold' */
            color: #4A5568; /* Tailwind 'text-gray-700' */
        }
        .user-display button {
            margin-left: 0.5rem; /* Tailwind 'ml-2' */
            padding: 0.5rem 1rem; /* Tailwind 'px-4 py-2' */
            background-color: #EF4444; /* Tailwind 'bg-red-500' */
            color: #FFFFFF; /* Tailwind 'text-white' */
            border-radius: 0.5rem; /* Tailwind 'rounded-lg' */
            font-weight: 500; /* Tailwind 'font-medium' */
            transition: background-color 0.2s ease-in-out;
        }
        .user-display button:hover {
            background-color: #DC2626; /* Tailwind 'hover:bg-red-600' */
        }
    </style>
    <!-- Firebase SDKs -->
    <script type="module">
        // Import các hàm bạn cần từ SDKs bạn muốn sử dụng
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-app.js"; 
        import { getAuth, onAuthStateChanged, signOut, signInWithCustomToken, signInAnonymously } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-auth.js"; 
        import { getFirestore } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-firestore.js"; 
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-analytics.js";

        // Cấu hình Firebase của bạn (lấy từ Firebase Console của dự án nespola-294d7)
        // Đảm bảo 'apiKey' ở đây CHÍNH XÁC với API Key từ Firebase Console của bạn.
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {
            apiKey: "AIzaSyB2S9V-EhHHsCQ_rxEUgA5DXfeZkFwOijY", // <-- API Key CHÍNH XÁC của bạn
            authDomain: "nespola-294d7.firebaseapp.com",
            projectId: "nespola-294d7",
            storageBucket: "nespola-294d7.firebasestorage.app",
            messagingSenderId: "893545252364",
            appId: "1:893545252364:web:3dd780e52ef2a0b5795029",
            measurementId: "G-2GLRRM71RV" 
        };
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';

        // Khởi tạo Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const analytics = getAnalytics(app);

        // Đăng nhập ẩn danh hoặc bằng custom token cho môi trường Canvas
        if (typeof __initial_auth_token !== 'undefined') {
            signInWithCustomToken(auth, __initial_auth_token).catch((error) => {
                console.error("Lỗi khi đăng nhập bằng custom token:", error);
                signInAnonymously(auth); // Fallback đăng nhập ẩn danh nếu token thất bại
            });
        } else {
            signInAnonymously(auth).catch((error) => {
                console.error("Lỗi khi đăng nhập ẩn danh:", error);
            });
        }

        // Xuất các instance và hàm Firebase ra đối tượng window để dễ dàng truy cập trong script
        window.firebaseApp = app;
        window.firebaseAuth = auth;
        window.firebaseDb = db;
        window.signOut = signOut; // Xuất hàm signOut
        window.onAuthStateChanged = onAuthStateChanged; // Xuất hàm onAuthStateChanged
    </script>
</head>
<body class="min-h-screen bg-white text-gray-800 antialiased">
    <div class="absolute inset-0 bg-gradient-to-br from-gray-50 via-white to-gray-100 z-0 pointer-events-none"></div>
    <div class="absolute inset-0 z-0 pointer-events-none" style="
        background-image: url(&quot;data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%239C92AC' fill-opacity='0.1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0 20v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zm0 20v-4H4v4H0v2h4v4h2v-4h4v-2H6zM36 4V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 4V0H4v4H0v2h4v4h2V6h4V4H6zM21 20v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0 20v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zM21 0v-4h-2v4h-4v2h4v4h2V6h4V4h-4zM41 20v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0 20v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zM41 0v-4h-2v4h-4v2h4v4h2V6h4V4h-4zM11 9v-4h-2v4H5v2h4v4h2v-4h4V9h-4zm0 20v-4h-2v4H5v2h4v4h2v-4h4v-2h-4zm0 20v-4h-2v4H5v2h4v4h2v-4h4v-2h-4zm30-30v-4h-2v4h-4v2h4v4h2v-4h4V9h-4zm0 20v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0 20v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E&quot;);
        background-size: 100px 100px;"></div>

    <header class="relative z-10 bg-white shadow-sm">
        <nav class="container mx-auto px-4 py-4 flex items-center justify-between">
            <div class="flex items-center space-x-2">
                <!-- Logo của server -->
                <img src="./logo.png" alt="NESPOLA Server Logo" class="h-10 md:h-12 object-contain">
            </div>

            <div class="flex items-center space-x-4">
                <span class="text-gray-600 font-semibold text-sm">v1.8</span>
                
                <div id="auth-status-container" class="flex items-center space-x-4">
                    <a
                        href="login.html"
                        id="login-button"
                        class="flex items-center px-4 py-2 bg-green-500 text-white rounded-lg shadow hover:bg-green-600 transition-colors duration-200"
                    >
                        <i class="fas fa-user mr-2"></i> Đăng nhập
                    </a>
                    <div id="user-info-display" class="hidden user-display">
                        <i class="fas fa-user-circle text-xl text-gray-600"></i>
                        <a href="userinfo.html" id="user-email-link" class="text-gray-700 font-semibold cursor-pointer hover:underline"></a> {/* Updated to a link */}
                        <button id="logout-button" class="px-3 py-1 bg-red-500 text-white rounded-md hover:bg-red-600 transition-colors duration-200 text-sm">
                            Đăng xuất
                        </button>
                    </div>
                </div>
            </div>

            <div class="md:hidden">
                <button class="p-2 text-gray-600 hover:text-green-600 focus:outline-none focus:ring-2 focus:ring-green-500 rounded-md">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                </button>
            </div>
        </nav>
    </header>

    <main class="relative z-10 flex flex-col items-center justify-center min-h-[calc(100vh-6rem)] text-center px-4 py-16 md:py-24">
        <h1 class="text-4xl md:text-6xl font-extrabold text-gray-900 leading-tight mb-4 initial-fade-in-up">
            SERVER HVH BEDWAR <br />
            <span class="animate-gradient-text">NESPOLA</span>
        </h1>

        <p class="text-lg md:text-xl text-gray-600 max-w-2xl mb-8 initial-fade-in-up delay-200">
            Khám phá thế giới Bedwars đầy kịch tính, chinh phục mọi đối thủ và trải nghiệm những trận chiến bất tận cùng cộng đồng NESPOLA!
        </p>

        <div class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4 initial-fade-in-up delay-400">
            <a
                href="#content-sections" id="explore-server-btn"
                class="flex items-center justify-center px-8 py-4 bg-green-500 text-white font-semibold rounded-lg shadow-lg hover:bg-green-600 transition-all duration-300 transform hover:scale-105"
            >
                <svg
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="text-white mr-2"
                >
                  <path d="M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20z" />
                  <path d="M14.71 14.71L12 17.41l-2.71-2.71a4 4 0 1 1 5.42 0z" />
                  <path d="M16 12l-4 4-4-4" />
                  <path d="M12 8V2" />
                  <path d="M12 22V16" />
                  <path d="M22 12H16" />
                  <path d="M8 12H2" />
                  <circle cx="12" cy="12" r="2" />
                </svg>
                Khám phá server
            </a>
            <a
                href="./about.html"
                class="flex items-center justify-center px-8 py-4 border-2 border-gray-300 text-gray-800 font-semibold rounded-lg shadow-md hover:bg-gray-100 transition-all duration-300 transform hover:scale-105">
                Tìm hiểu thêm <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="ml-2"><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>
            </a>
            <a
                href="./tut.html"
                class="flex items-center justify-center px-8 py-4 border-2 border-gray-300 text-gray-800 font-semibold rounded-lg shadow-md hover:bg-gray-100 transition-all duration-300 transform hover:scale-105">
                <i class="fas fa-book mr-2"></i> Cách vào
            </a>
            <button
                id="join-server-btn"
                class="flex items-center justify-center px-8 py-4 bg-blue-500 text-white font-semibold rounded-lg shadow-lg hover:bg-blue-600 transition-all duration-300 transform hover:scale-105"
            >
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2">
                    <path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>
                </svg>
                Server IP
            </button>
        </div>
    </main>

    <section id="content-sections" class="relative z-10 py-16 md:py-24 bg-gray-50">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-20 items-center animated-section slide-in-up-on-scroll">
                <div class="order-2 md:order-1">
                    <h2 class="text-3xl md:text-4xl font-extrabold text-gray-900 mb-4">
                        Kết nối và Chiến đấu
                    </h2>
                    <p class="text-lg text-gray-600 mb-6">
                        Kết nối với server NESPOLA dễ dàng và nhanh chóng. Chọn chế độ Bedwars yêu thích, tham gia trận đấu và bắt đầu cuộc chiến đầy kịch tính chỉ với vài bước đơn giản!
                    </p>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 text-gray-700">
                        <p class="flex items-center"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2 text-green-600"><circle cx="12" cy="12" r="10"/><path d="M16.24 7.76a6 6 0 0 0-8.49 0"/><path d="M11.66 16.34a2 2 0 0 0 2.83 0"/></svg> Phát hiện trận đấu nhanh</p>
                        <p class="flex items-center">
                            <!-- Fixed Bell Icon SVG -->
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2 text-green-600">
                                <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                                <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                            </svg>
                            Thông báo sự kiện
                        </p>
                        <p class="flex items-center"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2 text-green-600"><path d="M22 12H2"/><path d="M15 19l7-7-7-7"/></svg> Trải nghiệm mượt mà</p>
                        <p class="flex items-center"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2 text-green-600"><path d="M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"/><path d="M12 12v6"/><path d="m15 15-3 3-3-3"/></svg> Server ổn định</p>
                    </div>
                </div>
                <!-- Ảnh cho phần "Kết nối và Chiến đấu" -->
                <div class="order-1 md:order-2 flex justify-center items-center w-full max-w-md bg-cover bg-center bg-no-repeat rounded-lg overflow-hidden shadow-lg aspect-video card-effect group"
                     style="background-image: url('./anh-pvp.png');">
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-20 items-center animated-section slide-in-up-on-scroll">
                <!-- Ảnh cho phần "Theo dõi các event bạn yêu thích" -->
                <div class="order-1 md:order-1 flex justify-center items-center w-full max-w-md bg-cover bg-center bg-no-repeat rounded-lg overflow-hidden shadow-lg aspect-video card-effect group"
                     style="background-image: url('./anh-event.png');">
                </div>
                <div class="order-2 md:order-2">
                    <h2 class="text-3xl md:text-4xl font-extrabold text-gray-900 mb-4">
                        Theo dõi các event bạn yêu thích
                    </h2>
                    <p class="text-lg text-gray-600 mb-6">
                        Nhận thông báo mỗi khi các sự kiện hoặc giải đấu mới được tổ chức và luôn nắm bắt mọi thông tin quan trọng nhất.
                    </p>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 text-gray-700">
                        <p class="flex items-center"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2 text-green-600"><path d="M6 8a6 6 0 = 12 0c0 7 3 9 3 9H3s3-2 3-9"/><path d="M10.3 21a1.94 1.94 0 0 0 3.4 0"/></svg> Thông báo sự kiện</p>
                        <p class="flex items-center"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2 text-green-600"><path d="M22 12H2"/><path d="M18 5l4 7-4 7"/><path d="M6 5l-4 7 4 7"/></svg> Cập nhật thường xuyên</p>
                    </div>
                </div>
            </div>

            <div class="text-center mb-16 animated-section slide-in-up-on-scroll">
                <h2 class="text-3xl md:text-4xl font-extrabold text-gray-900 mb-4">
                    Chinh phục mọi thử thách, làm chủ cuộc chơi!
                </h2>
                <p class="text-lg text-gray-600 max-w-3xl mx-auto">
                    Trải nghiệm Bedwars HVH đỉnh cao với các tính năng độc quyền, giúp bạn nâng tầm kỹ năng và thể hiện bản lĩnh.
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 animated-section scale-in-on-scroll">
                <div class="p-6 bg-white rounded-lg shadow-md flex items-start space-x-4 card-effect group">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-green-600 mt-1"><circle cx="12" cy="12" r="10"/><path d="M16.24 7.76a6 6 0 0 0-8.49 0"/><path d="M11.66 16.34a2 2 0 0 0 2.83 0"/></svg>
                    <div>
                        <h3 class="text-xl font-semibold text-gray-900 mb-2">Khám phá chiến trường</h3>
                        <p class="text-gray-600">Khám phá đa dạng các bản đồ Bedwars với địa hình và chiến thuật độc đáo, không ngừng đổi mới.</p>
                    </div>
                </div>
                <div class="p-6 bg-white rounded-lg shadow-md flex items-start space-x-4 card-effect group">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-green-600 mt-1"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
                    <div>
                        <h3 class="text-xl font-semibold text-gray-900 mb-2">Đội hình bất bại</h3>
                        <p class="text-gray-600">Lập đội cùng bạn bè, xây dựng chiến thuật thông minh và phối hợp ăn ý để thống trị mọi trận đấu.</p>
                    </div>
                </div>
                <div class="p-6 bg-white rounded-lg shadow-md flex items-start space-x-4 card-effect group">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-green-600 mt-1"><path d="m15 5 6 6-6 6"/><path d="M3 12h18"/></svg>
                    <div>
                        <h3 class="text-xl font-semibold text-gray-900 mb-2">Thăng cấp & Nhận thưởng</h3>
                        <p class="text-gray-600">Đạt thứ hạng cao trên bảng xếp hạng, mở khóa phần thưởng độc quyền và chứng tỏ kỹ năng của bạn.</p>
                    </đoạn>
                </div>
                <div class="p-6 bg-white rounded-lg shadow-md flex items-start space-x-4 card-effect group">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-green-600 mt-1"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>
                    <div>
                        <h3 class="text-xl font-semibold text-gray-900 mb-2">Chế độ độc đáo</h3>
                        <p class="text-gray-600">Trải nghiệm nhiều chế độ chơi Bedwars độc đáo, cùng các sự kiện và giải đấu hấp dẫn được tổ chức thường xuyên.</p>
                    </div>
                </div>
                <div class="p-6 bg-white rounded-lg shadow-md flex items-start space-x-4 card-effect group">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-green-600 mt-1"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg>
                    <div>
                        <h3 class="text-xl font-semibold text-gray-900 mb-2">Thống kê chi tiết</h3>
                        <p class="text-gray-600">Theo dõi mọi chỉ số: KDA, win-rate, số trận thắng, và thứ hạng của bạn để cải thiện kỹ năng.</p>
                    </div>
                </div>
                <div class="p-6 bg-white rounded-lg shadow-md flex items-start space-x-4 card-effect group">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-green-600 mt-1"><path d="M22 12H2"/><path d="M18 5l4 7-4 7"/><path d="M6 5l-4 7 4 7"/></svg>
                    <div>
                        <h3 class="text-xl font-semibold text-gray-900 mb-2">Cập nhật không ngừng</h3>
                        <p class="text-gray-600">Máy chủ luôn được cập nhật các bản đồ, chế độ mới và tối ưu hóa hiệu suất để mang lại trải nghiệm mượt mà nhất.</p>
                    </div>
                </div>
            </div>

            <!-- Tham gia cộng đồng section -->
            <div class="text-center mt-20 animated-section slide-in-up-on-scroll">
                <div class="flex justify-center mb-8">
                    <svg
                      width="64"
                      height="64"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="1"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      class="text-green-600"
                    >
                      <path d="M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20z" />
                      <path d="M14.71 14.71L12 17.41l-2.71-2.71a4 4 0 1 1 5.42 0z" />
                      <path d="M16 12l-4 4-4-4" />
                      <path d="M12 8V2" />
                      <path d="M12 22V16" />
                      <path d="M22 12H16" />
                      <path d="M8 12H2" />
                      <circle cx="12" cy="12" r="2" />
                    </svg>
                </div>
                <h2 class="text-4xl md:text-5xl font-extrabold text-gray-900 mb-6">
                    Tham gia cộng đồng NESPOLA ngay!
                </h2>
                <a
                    href="https://discord.gg/gYTRrGx8Vv"
                    target="_blank"
                    rel="noopener noreferrer"
                    class="inline-flex items-center px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg shadow-lg hover:bg-blue-700 transition-all duration-300 transform hover:scale-105"
                >
                    <i class="fab fa-discord w-5 h-5 mr-2 text-xl"></i>
                    Tham gia Discord
                </a>
            </div>

        </div>
    </section>

    <!-- Join Server Modal (Now displays the error message as per user request) -->
    <div id="join-server-modal" class="modal-overlay fixed inset-0 flex items-center justify-center z-50">
        <div class="modal-content bg-white p-8 rounded-lg shadow-xl relative w-11/12 max-w-sm text-center">
            <button id="close-modal-btn" class="absolute top-4 right-4 text-gray-500 hover:text-gray-700">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>
            <h3 class="text-2xl font-bold text-red-600 mb-4">Lỗi: Server chưa phát hành!</h3>
            <p class="text-gray-700 mb-4">
                SERVER HVH BEDWAR NESPOLA hiện chưa được phát hành.
            </p>
            <p class="text-gray-700 mb-6 font-semibold">
                Vui lòng thử lại sau hoặc theo dõi kênh Discord để nhận thông báo sớm nhất nhé!
            </p>
            <a
                href="https://discord.gg/gYTRrGx8Vv"
                target="_blank"
                rel="noopener noreferrer"
                class="inline-flex items-center px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg shadow-lg hover:bg-blue-700 transition-all duration-300 transform hover:scale-105"
            >
                <i class="fab fa-discord w-5 h-5 mr-2 text-xl"></i>
                Tham gia Discord
            </a>
        </div>
    </div>

    <script type="module">
        document.addEventListener('DOMContentLoaded', () => {
            const loginButton = document.getElementById('login-button');
            const userInfoDisplay = document.getElementById('user-info-display');
            const userEmailLink = document.getElementById('user-email-link'); // Đã đổi tên từ userEmailSpan
            const logoutButton = document.getElementById('logout-button');

            const joinServerBtn = document.getElementById('join-server-btn');
            const joinServerModal = document.getElementById('join-server-modal');
            const closeModalBtn = document.getElementById('close-modal-btn');

            // --- Logic xử lý trạng thái đăng nhập ---
            const auth = window.firebaseAuth;
            const onAuthStateChanged = window.onAuthStateChanged;
            const signOut = window.signOut;

            if (auth && onAuthStateChanged) {
                onAuthStateChanged(auth, (user) => {
                    if (user) {
                        // Người dùng đã đăng nhập
                        loginButton.classList.add('hidden'); // Ẩn nút Đăng nhập
                        userInfoDisplay.classList.remove('hidden'); // Hiển thị thông tin người dùng
                        // user.displayName sẽ được ưu tiên, nếu không có thì dùng email
                        userEmailLink.textContent = user.displayName || user.email || 'Người dùng'; 
                        userEmailLink.href = 'userinfo.html'; // Liên kết đến trang userinfo
                    } else {
                        // Người dùng chưa đăng nhập
                        loginButton.classList.remove('hidden'); // Hiển thị nút Đăng nhập
                        userInfoDisplay.classList.add('hidden'); // Ẩn thông tin người dùng
                    }
                });

                // Xử lý sự kiện đăng xuất
                if (logoutButton) {
                    logoutButton.addEventListener('click', async () => {
                        try {
                            await signOut(auth);
                            console.log("Đăng xuất thành công!");
                            // UI sẽ được onAuthStateChanged tự động cập nhật
                            // Có thể thêm chuyển hướng về trang chủ nếu muốn:
                            // window.location.href = 'index.html';
                        } catch (error) {
                            console.error("Lỗi khi đăng xuất:", error);
                            // Sử dụng modal hoặc div hiển thị thông báo thay vì alert()
                            // alert("Có lỗi khi đăng xuất. Vui lòng thử lại."); 
                        }
                    });
                }
            } else {
                console.error("Firebase Auth hoặc onAuthStateChanged chưa được khởi tạo. Đảm bảo bạn đã import đúng.");
            }
            // --- Kết thúc logic xử lý trạng thái đăng nhập ---


            // Function to open the modal (for "Server IP" button)
            const openModal = () => {
                if (joinServerModal) {
                    joinServerModal.classList.add('open');
                }
            };

            // Function to close and reset the modal
            const closeAndResetModal = () => {
                if (joinServerModal) {
                    joinServerModal.classList.remove('open');
                }
            };

            // Event listener for the "Server IP" button in the main section
            if (joinServerBtn) {
                joinServerBtn.addEventListener('click', openModal);
            }

            // Event listener for closing the modal via the 'X' button
            if (closeModalBtn) {
                closeModalBtn.addEventListener('click', closeAndResetModal);
            }

            // Event listener for closing the modal by clicking outside its content
            if (joinServerModal) {
                joinServerModal.addEventListener('click', (e) => {
                    if (e.target === joinServerModal) { // Check if click target is the overlay itself
                        closeAndResetModal();
                    }
                });
            }

            // Intersection Observer for scroll-triggered animations (animate elements as they come into view)
            const animateOnScrollElements = document.querySelectorAll('.animated-section'); // Đã chỉnh sang animated-section

            const observerOptions = {
                root: null, // Use the viewport as the root
                rootMargin: '0px',
                threshold: 0.1 // Trigger when 10% of the element is visible
            };

            const observer = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('is-visible');
                        // Có thể dừng quan sát sau khi đã nhìn thấy để animation chỉ chạy một lần
                        // Nếu muốn animation chạy lại mỗi lần cuộn qua, hãy bỏ dòng này
                        // observer.unobserve(entry.target); 
                    } else {
                        // Nếu muốn animation reset khi cuộn ra khỏi viewport
                        // entry.target.classList.remove('is-visible');
                    }
                });
            }, observerOptions);

            // Observe each element with the 'animated-section' class
            animateOnScrollElements.forEach(element => {
                observer.observe(element);
            });
        });
    </script>
</body>
</html>
